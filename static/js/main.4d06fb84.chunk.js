(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{30:function(e,t,n){e.exports=n(67)},66:function(e,t,n){},67:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(23),i={videoHeight:300,minimized:!1};function c(e,t){var n=Object(a.a)(e,function(e){switch(t.type){case"set-channel":e.channel=t.channel||void 0;break;case"toggle-minimized":e.minimized=!e.minimized;break;case"set-video-height":e.videoHeight=null!=t.height?Math.min(window.innerHeight-300,Math.max(100,t.height)):void 0}});return function(e){localStorage.setItem("twitchat.work_data",JSON.stringify(e))}(n),n}var o=r.createContext([{},function(){}]);o.displayName="StateContext";var u=function(e){var t=e.initialState,n=void 0===t?i:t,a=e.children,u=r.useReducer(c,n,function(e){return function(e){try{var t=localStorage.getItem("twitchat.work_data");return null==t?e:JSON.parse(t)}catch(n){return e}}(e||{})});return r.createElement(o.Provider,{value:u},a)};function l(){return r.useContext(o)}var s=n(1),m=n(24),d=function(){return r.createElement("header",null,r.createElement(h,null))},h=function(){var e=l(),t=Object(s.a)(e,2),n=t[0].channel,a=t[1],i=r.useState(n||""),c=Object(s.a)(i,2),o=c[0],u=c[1],d=Object(m.useDebouncedCallback)(function(e){return a({type:"set-channel",channel:e})},1e3,[]),h=Object(s.a)(d,1)[0];return r.createElement("input",{type:"text",className:"channel-switcher",value:o,onChange:function(e){u(e.target.value),h(e.target.value)},placeholder:"Enter Channel Name..."})},v=n(6),f=n.n(v),w=n(25),p=n(26),g=n.n(p).a,E=n(27),b=n(28),y=n.n(b),j=n(14),O=new Promise(function(e,t){g("https://player.twitch.tv/js/embed/v1.js",function(n){n?t(n):e()})}),k=Object(E.createUseResolver)({resolve:function(){var e=Object(w.a)(f.a.mark(function e(){var t;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O;case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),shouldUpdate:function(){return!1}}),N=function(){var e=r.useState(!1),t=Object(s.a)(e,2),n=t[0],a=t[1],i=l(),c=Object(s.a)(i,2),o=c[0],u=o.minimized,m=o.videoHeight,d=void 0===m?300:m,h=c[1],v=r.useState(function(){return Object(j.throttle)(function(e){console.log(e),h(function(e){return{type:"set-video-height",height:e}}(e))},1e3/30)}),f=Object(s.a)(v,1)[0];return r.createElement("div",{className:y()("player",{dragging:n,minimized:u}),onMouseDown:function(e){if(e.target.classList.contains("control-bar")){var t,n,r=e.pageY,i=d;document.addEventListener("mousemove",t=function(e){f(i+(e.pageY-r))}),document.addEventListener("mouseup",n=function(){document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",n),a(!1)}),a(!0)}}},r.createElement("div",{className:"click-absorber"}),r.createElement(S,null),r.createElement(z,null),r.createElement(x,null))},S=function(){var e=r.useRef(),t=l(),n=Object(s.a)(t,1)[0],a=n.channel,i=n.minimized,c=n.videoHeight,o=void 0===c?300:c;return r.useEffect(function(){if(null!=a){var t=document.getElementById("twitch-player");if(null==t)throw new Error("no element");var n=e.current=new Twitch.Player("twitch-player",{channel:a,width:t.offsetWidth,height:o});return function(){n.destroy(),e.current=void 0}}},[a]),r.useEffect(function(){var e=document.querySelector("#twitch-player > iframe");e&&(e.height=o+"px")},[o]),r.useEffect(function(){var e;return window.addEventListener("resize",e=Object(j.throttle)(function(){var e=document.getElementById("twitch-player");if(null!=e){var t=e.querySelector("iframe");t&&(t.width=e.offsetWidth+"px")}},250)),function(){window.removeEventListener("resize",e)}},[]),r.createElement("div",{className:"twitch-player",id:"twitch-player",style:{height:i?0:o}})},z=function(){var e=l(),t=Object(s.a)(e,2)[1];return r.createElement("div",{className:"control-bar"},r.createElement("button",{className:"minimize",onClick:function(){t({type:"toggle-minimized"})}}))},x=function(){var e=l(),t=Object(s.a)(e,1)[0].channel;return t?r.createElement("iframe",{className:"twitch-chat",frameBorder:"0",scrolling:"no",src:"https://www.twitch.tv/embed/".concat(t,"/chat")}):null},L=n(29),C=n.n(L);n(66),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n.d(t,"App",function(){return B}),n.d(t,"Body",function(){return H});var B=function(){return r.createElement("div",{className:"app"},r.createElement(u,null,r.createElement(d,null),r.createElement(H,null)))},H=function(){var e=k(),t=e.error,n=e.loading;return t?r.createElement("div",{style:{color:"red"}},t.toString()):n?r.createElement("div",null,"Loading"):r.createElement(N,null)};C.a.render(r.createElement(B,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[30,1,2]]]);
//# sourceMappingURL=main.4d06fb84.chunk.js.map