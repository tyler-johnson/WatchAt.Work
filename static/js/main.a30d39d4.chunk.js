(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,t,n){e.exports=n(21)},13:function(e,t,n){},21:function(e,t,n){"use strict";n.r(t);n(13);var r=n(0),i=n(6),a=n.n(i),c=n(11),o=n(1),u=n(7),l=n.n(u).a,s=n(8),m=n.n(s),d=n(9);function h(e,t){var n=Object(d.a)(e,function(e){switch(t.type){case"set-source":e.source=t.source;break;case"set-channel":e.channel=t.channel||void 0;break;case"toggle-minimized":e.minimized=!e.minimized;break;case"set-video-height":e.videoHeight=null!=t.height?Math.min(window.innerHeight-300,Math.max(100,t.height)):void 0}});return function(e){localStorage.setItem("twitchat.work_data",JSON.stringify(e))}(n),n}var f=r.createContext([{source:"twitch",videoHeight:300,minimized:!1},function(){}]);f.displayName="StateContext";var v=function(e){var t=e.initialState,n=void 0===t?{source:"twitch",videoHeight:300,minimized:!1}:t,i=e.children,a=r.useReducer(h,n,function(e){return function(e){try{var t=localStorage.getItem("twitchat.work_data");return null==t?e:JSON.parse(t)}catch(n){return e}}(e||{})});return r.createElement(f.Provider,{value:a},i)};function w(){return r.useContext(f)}var g=n(2),E=void 0!==Object({NODE_ENV:"production",PUBLIC_URL:""}).JEST_WORKER_ID?new Promise(function(){}):new Promise(function(e,t){l("https://player.twitch.tv/js/embed/v1.js",function(n){n?t(n):e()})}),p=function(){var e=r.useState({loading:!0}),t=Object(o.a)(e,2),n=t[0],i=n.error,a=n.loading,u=t[1];return r.useEffect(function(){var e=function(e){return u(Object(c.a)({},e,{loading:!1}))};E.then(function(){return e()},function(t){return e({error:t})})},[]),i?r.createElement("div",{style:{color:"red"}},i.toString()):a?r.createElement("div",null,"Loading"):r.createElement(b,null)},b=function(){var e=r.useState(!1),t=Object(o.a)(e,2),n=t[0],i=t[1],a=w(),c=Object(o.a)(a,2),u=c[0],l=u.minimized,s=u.videoHeight,d=void 0===s?300:s,h=c[1],f=r.useState(function(){return Object(g.throttle)(function(e){h(function(e){return{type:"set-video-height",height:e}}(e))},1e3/30)}),v=Object(o.a)(f,1)[0];return r.createElement("div",{className:m()("player",{dragging:n,minimized:l}),onMouseDown:function(e){if(e.target.classList.contains("control-bar")){var t,n,r=e.pageY,a=d;document.addEventListener("mousemove",t=function(e){v(a+(e.pageY-r))}),document.addEventListener("mouseup",n=function(){document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",n),i(!1)}),i(!0)}}},r.createElement("div",{className:"click-absorber"}),r.createElement(y,null),r.createElement(O,null),r.createElement(j,null))},y=function(){var e=r.useRef(),t=w(),n=Object(o.a)(t,1)[0],i=n.channel,a=n.minimized,c=n.videoHeight,u=void 0===c?300:c;return r.useEffect(function(){if(null!=i){var t=document.getElementById("twitch-player");if(null==t)throw new Error("no element");var n=e.current=new Twitch.Player("twitch-player",{channel:i,width:t.offsetWidth,height:u});return function(){n.destroy(),e.current=void 0}}},[i]),r.useEffect(function(){var e=document.querySelector("#twitch-player > iframe");e&&(e.height=u+"px")},[u]),r.useEffect(function(){var e;return window.addEventListener("resize",e=Object(g.throttle)(function(){var e=document.getElementById("twitch-player");if(null!=e){var t=e.querySelector("iframe");t&&(t.width=e.offsetWidth+"px")}},250)),function(){window.removeEventListener("resize",e)}},[]),r.createElement("div",{className:"twitch-player",id:"twitch-player",style:{height:a?0:u}})},O=function(){var e=w(),t=Object(o.a)(e,2)[1];return r.createElement("div",{className:"control-bar"},r.createElement("button",{className:"minimize",onClick:function(){t({type:"toggle-minimized"})}}))},j=function(){var e=w(),t=Object(o.a)(e,1)[0].channel;return t?r.createElement("iframe",{className:"twitch-chat",frameBorder:"0",scrolling:"no",src:"https://www.twitch.tv/embed/".concat(t,"/chat")}):null},N=n(10),S=function(){return r.createElement("header",null,r.createElement(z,null))},z=function(){var e=w(),t=Object(o.a)(e,2),n=t[0].channel,i=t[1],a=r.useState(n||""),c=Object(o.a)(a,2),u=c[0],l=c[1],s=Object(N.useDebouncedCallback)(function(e){return i({type:"set-channel",channel:e})},1e3,[]),m=Object(o.a)(s,1)[0];return r.createElement("input",{type:"text",className:"channel-switcher",value:u,onChange:function(e){l(e.target.value),m(e.target.value)},placeholder:"Enter Channel Name...",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1})};a.a.render(r.createElement(function(){return r.createElement("div",{className:"app"},r.createElement(v,null,r.createElement(S,null),r.createElement(p,null)))},null),document.getElementById("root"))}},[[12,1,2]]]);
//# sourceMappingURL=main.a30d39d4.chunk.js.map