(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{30:function(e,t,n){e.exports=n(67)},31:function(e,t,n){},67:function(e,t,n){"use strict";n.r(t);n(31);var r=n(0),a=n(23),i=n.n(a),c=n(1),o=n(6),u=n.n(o),l=n(24),s=n(25),m=n.n(s).a,d=n(26),f=n(27),h=n.n(f),v=n(28),p={videoHeight:300,minimized:!1};function w(e,t){var n=Object(v.a)(e,function(e){switch(t.type){case"set-channel":e.channel=t.channel||void 0;break;case"toggle-minimized":e.minimized=!e.minimized;break;case"set-video-height":e.videoHeight=null!=t.height?Math.min(window.innerHeight-300,Math.max(100,t.height)):void 0}});return function(e){localStorage.setItem("twitchat.work_data",JSON.stringify(e))}(n),n}var g=r.createContext([{},function(){}]);g.displayName="StateContext";var E=function(e){var t=e.initialState,n=void 0===t?p:t,a=e.children,i=r.useReducer(w,n,function(e){return function(e){try{var t=localStorage.getItem("twitchat.work_data");return null==t?e:JSON.parse(t)}catch(n){return e}}(e||{})});return r.createElement(g.Provider,{value:i},a)};function b(){return r.useContext(g)}var y=n(14),j=new Promise(function(e,t){m("https://player.twitch.tv/js/embed/v1.js",function(n){n?t(n):e()})}),O=Object(d.createUseResolver)({resolve:function(){var e=Object(l.a)(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j;case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),shouldUpdate:function(){return!1}}),z=function(){var e=r.useState(!1),t=Object(c.a)(e,2),n=t[0],a=t[1],i=b(),o=Object(c.a)(i,2),u=o[0],l=u.minimized,s=u.videoHeight,m=void 0===s?300:s,d=o[1],f=r.useState(function(){return Object(y.throttle)(function(e){d(function(e){return{type:"set-video-height",height:e}}(e))},1e3/30)}),v=Object(c.a)(f,1)[0];return r.createElement("div",{className:h()("player",{dragging:n,minimized:l}),onMouseDown:function(e){if(e.target.classList.contains("control-bar")){var t,n,r=e.pageY,i=m;document.addEventListener("mousemove",t=function(e){v(i+(e.pageY-r))}),document.addEventListener("mouseup",n=function(){document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",n),a(!1)}),a(!0)}}},r.createElement("div",{className:"click-absorber"}),r.createElement(N,null),r.createElement(S,null),r.createElement(k,null))},N=function(){var e=r.useRef(),t=b(),n=Object(c.a)(t,1)[0],a=n.channel,i=n.minimized,o=n.videoHeight,u=void 0===o?300:o;return r.useEffect(function(){if(null!=a){var t=document.getElementById("twitch-player");if(null==t)throw new Error("no element");var n=e.current=new Twitch.Player("twitch-player",{channel:a,width:t.offsetWidth,height:u});return function(){n.destroy(),e.current=void 0}}},[a]),r.useEffect(function(){var e=document.querySelector("#twitch-player > iframe");e&&(e.height=u+"px")},[u]),r.useEffect(function(){var e;return window.addEventListener("resize",e=Object(y.throttle)(function(){var e=document.getElementById("twitch-player");if(null!=e){var t=e.querySelector("iframe");t&&(t.width=e.offsetWidth+"px")}},250)),function(){window.removeEventListener("resize",e)}},[]),r.createElement("div",{className:"twitch-player",id:"twitch-player",style:{height:i?0:u}})},S=function(){var e=b(),t=Object(c.a)(e,2)[1];return r.createElement("div",{className:"control-bar"},r.createElement("button",{className:"minimize",onClick:function(){t({type:"toggle-minimized"})}}))},k=function(){var e=b(),t=Object(c.a)(e,1)[0].channel;return t?r.createElement("iframe",{className:"twitch-chat",frameBorder:"0",scrolling:"no",src:"https://www.twitch.tv/embed/".concat(t,"/chat")}):null},C=n(29),x=function(){return r.createElement("header",null,r.createElement(L,null))},L=function(){var e=b(),t=Object(c.a)(e,2),n=t[0].channel,a=t[1],i=r.useState(n||""),o=Object(c.a)(i,2),u=o[0],l=o[1],s=Object(C.useDebouncedCallback)(function(e){return a({type:"set-channel",channel:e})},1e3,[]),m=Object(c.a)(s,1)[0];return r.createElement("input",{type:"text",className:"channel-switcher",value:u,onChange:function(e){l(e.target.value),m(e.target.value)},placeholder:"Enter Channel Name...",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1})};n.d(t,"App",function(){return B}),n.d(t,"Body",function(){return H});var B=function(){return r.createElement("div",{className:"app"},r.createElement(E,null,r.createElement(x,null),r.createElement(H,null)))},H=function(){var e=O(),t=e.error,n=e.loading;return t?r.createElement("div",{style:{color:"red"}},t.toString()):n?r.createElement("div",null,"Loading"):r.createElement(z,null)};i.a.render(r.createElement(B,null),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.4c9f4964.chunk.js.map